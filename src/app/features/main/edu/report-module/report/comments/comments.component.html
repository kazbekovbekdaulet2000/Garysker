<ng-container *ngIf="comments$ | async as comments">
  
  <div #holder class="comment-holder">

    <h5>{{(report$ | async)!.comments_count}} комментарии </h5>

    <div *ngIf="(access$ | async) !== ''" class="textfield" [formGroup]="formGroup">

      <textarea 
        #input 
        rows=3 
        [placeholder]="'video.comment.placeholder' | translate" 
        class="textfield-area" 
        [class.large]="textInputLarge"
        formControlName="body" 
        (click)="textareaTap()" 
        (keydown)="triggerFunction($event)"></textarea>

      <div class="d-flex justify-content-end">
        <button 
          @opacityAnimation 
          *ngIf="textInputLarge" 
          class="btn textfield-btn"
          (click)="sendComment()">{{'app.comment.send' | translate}}</button>
      </div>

    </div>

    <ng-container *ngIf="comments.count>0; else empty">

      <app-comment-module 
        *ngFor="let comment of comments.results" 
        [comment]="comment" 
        (reply)="addReply($event)"
        (delete)="deleteComment($event)"
        (like)="postLike($event)"
        (patch)="patchComment($event)">
      </app-comment-module>

    </ng-container>

  <ng-template #empty>
      <div *ngIf="(access$ | async)! !== ''" class="d-flex justify-content-center mt-2">{{'app.comment.comment_req' | translate}}</div>
    </ng-template>

    <a 
      class="d-flex loadmore my-2 align-items-center justify-content-center pointer" 
      *ngIf="comments.next" 
      (click)="loadMore()"
      translate="app.comment.load_more">
    </a>

  </div>

</ng-container>