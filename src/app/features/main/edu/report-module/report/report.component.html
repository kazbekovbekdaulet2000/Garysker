<ng-container *ngIf="report$ | async as report; else loader">

  <div class="report-holder">

    <div @opacityAnimation class="report">

      <app-report-menu [report]="report"></app-report-menu>

      <h1 class="report-header"> {{report | lang: 'title' | async}}</h1>

      <div class="report-body">
        <span class="mb-0" style="white-space: pre-line;">
          {{report | lang: 'preview_text' | async}}
        </span>
      </div>

      <div class="report-stat mb-4">

        <div class="pointer" (click)="onComment()">
          <img src="assets/icons/comment.svg" alt="">
          {{report.comments_count}}
        </div>

        <img class="pointer" (click)="onSave(report.id)"
          [src]="report.bookmarked ? 'assets/icons/saved_new.svg' : 'assets/icons/save_new.svg'" alt="">

        <img class="pointer" (click)="onShare()" src="assets/icons/new_share.svg" alt="">

        <div class="report-stat-views pointer" (click)="likeReport(report.id)">
          <img [src]="report.liked ? 'assets/icons/liked_new.svg' : 'assets/icons/like_new.svg'" alt="">
          {{report.likes_count}}
        </div>

      </div>

      <div #body class="report-body" [innerHTML]="report | sanitizerLang: 'body' | async"></div>

      <div class="report-author">

        <img class="report-author-photo" [src]="report.author.image">

        <div class="d-flex flex-column">
          <div class="report-author-name">{{report.author.surname}} {{report.author.name}}</div>
          <div class="report-author-role">Автор</div>
        </div>

      </div>

      <div class="report-views">{{'report.views' | translate: ({count: report.views})}}</div>

      <div class="report-stat">

        <div class="pointer" (click)="onComment()">
          <img src="assets/icons/comment.svg" alt="">
          {{report.comments_count}}
        </div>

        <img class="pointer" (click)="onSave(report.id)"
          [src]="report.bookmarked ? 'assets/icons/saved_new.svg' : 'assets/icons/save_new.svg'" alt="">

        <img class="pointer" (click)="onShare()" src="assets/icons/new_share.svg" alt="">

        <div class="report-stat-views pointer" (click)="likeReport(report.id)">
          <img [src]="report.liked ? 'assets/icons/liked_new.svg' : 'assets/icons/like_new.svg'" alt="">
          {{report.likes_count}}
        </div>

      </div>

    </div>

    <app-report-comments #comments></app-report-comments>

    <app-report-related [reportId]="reportId"></app-report-related>

  </div>

</ng-container>

<ng-template #loader>
  <app-loader></app-loader>
</ng-template>